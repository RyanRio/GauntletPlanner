<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gauntlet Planner</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="hero">
      <div class="hero-inner">
        <div>
          <div class="eyebrow">Pokemon Masters â€¢ Legendary Gauntlet</div>
          <h1>Gauntlet Planner</h1>
          <p class="subhead">
            Match your owned sync pairs against known clears and draft a battle plan
            that maximizes full rounds.
          </p>
        </div>
        <div class="hero-card">
          <div class="hero-metric">
            <div class="label">Owned pairs loaded</div>
            <div class="value" id="ownedCount">0</div>
          </div>
          <div class="hero-metric">
            <div class="label">Valid clears</div>
            <div class="value" id="validClears">0</div>
          </div>
          <div class="hero-metric">
            <div class="label">Estimated full rounds</div>
            <div class="value" id="roundCount">0</div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <section class="panel">
        <div class="panel-header">
          <h2>Inputs</h2>
          <p>Load your exported pairs. Clears are loaded automatically from the XLSX extract.</p>
        </div>
        <div class="grid two">
          <div class="card">
            <h3>Owned Sync Pairs</h3>
            <p class="muted">Defaults to `./my_pairs.json`.</p>
            <div class="controls">
              <input type="file" id="pairsFile" accept="application/json" />
              <button id="reloadPairs">Reload default</button>
            </div>
            <div class="control-row">
              <input type="text" id="pairSearch" placeholder="Search owned pairs" />
              <span class="pill" id="pairsStatus">Waiting</span>
            </div>
            <div class="scroll" id="pairsList"></div>
          </div>

          <div class="card">
            <h3>XLSX Extract</h3>
            <p class="muted">Auto-loads `./clears_from_xlsx.json` (generated by the setup script).</p>
            <div class="controls">
              <button id="reloadClears">Retry load</button>
            </div>
            <div class="scroll" id="clearsStatus"></div>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>Plan</h2>
          <p>
            The planner uses a heuristic to draft a sequence of rounds without
            reusing any sync pairs.
          </p>
        </div>
        <div class="card">
          <div class="controls">
            <button id="buildPlan">Build plan</button>
            <button id="resetPlan">Reset</button>
            <span class="pill" id="planStatus">No plan yet</span>
          </div>
          <div class="tabs">
            <button class="tab active" data-tab="plan">Suggested Runs</button>
            <button class="tab" data-tab="bosses">Boss Clears</button>
            <div class="tab-meta">
              <span class="pill warn" id="unmatchedCount">Unmatched: 0</span>
              <span class="pill warn" id="ambiguousCount">Ambiguous: 0</span>
              <span class="pill warn" id="notOwnedCount">Not owned: 0</span>
              <span class="pill" id="manualMatchCount">Manual: 0</span>
            </div>
          </div>
          <div id="planOutput" class="plan tab-content active" data-tab-content="plan"></div>
          <div id="bossOutput" class="plan tab-content" data-tab-content="bosses"></div>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>Sync Pair Details</h2>
          <p>
            There are many sync pairs that were probably unable to be automatically matched
            from the excel sheet to your sync pair tracker info. This is because a different naming
            scheme is used and unfortunately the icons are slightly different shades as well. In these cases,
            you can use the visual compare section below to resolve cases where you <i>may</i> have the
            corresponding sync pair. Note that if there is no legendary clear for a pair, it won't show up in either
            section below. The not owned section will show everything currently unresolved and allow you to sort
            to figure out if maybe you can acquire the pair for an easy clear.
          </p>
        </div>
        <div class="card">
          <details class="not-owned">
            <summary>Visual Compare (Sheet vs Tracker)</summary>
            <div class="scroll scroll-tall" id="visualCompare"></div>
          </details>
          <details class="not-owned">
            <summary>Not owned (from tracker)</summary>
            <div class="controls">
              <label class="muted">
                Sort:
                <select id="notOwnedSort">
                  <option value="name" selected>Name</option>
                  <option value="investment">Investment</option>
                </select>
              </label>
            </div>
            <div class="scroll scroll-tall" id="notOwned"></div>
          </details>
          <details class="not-owned">
            <summary>Current Manual Matches</summary>
            <div class="controls">
              <button id="clearMatches">Clear manual matches</button>
            </div>
            <div class="scroll scroll-tall" id="manualMatchesList"></div>
          </details>
        </div>
      </section>
    </main>

    <section class="panel">
      <div class="panel-header">
        <h2>Difficulty Legend</h2>
        <p>Min investment difficulty and special requirements from the sheet.</p>
      </div>
      <div class="card legend">
        <div class="legend-item"><span>ğŸ”°</span> Beginner Difficulty</div>
        <div class="legend-item"><span>âœ”ï¸</span> Normal Difficulty</div>
        <div class="legend-item"><span>âš ï¸</span> Moderate Difficulty</div>
        <div class="legend-item"><span>â›”</span> Difficult/RNG Heavy/Precise</div>
        <div class="legend-item"><span>ğŸš«</span> Not Recommended</div>
        <div class="legend-item"><span>ğŸ•—</span> Time Consuming</div>
        <div class="legend-item"><span>ğŸ”</span> Reset Heavy</div>
        <div class="legend-item"><span>âš™ï¸</span> Skill Gear Required</div>
        <div class="legend-item"><span>ğŸª½</span> Dodge Reliant</div>
        <div class="legend-item"><span>ğŸ’¦ğŸ’¤ğŸ§Š</span> Disable Spam</div>
        <div class="legend-item"><span>âš¡</span> Energy Overcap</div>
        <div class="legend-item"><span>*ï¸âƒ£</span> Lvl 181-200</div>
        <div class="legend-item"><span>ğŸ¥ </span> Special Cookie Required</div>
      </div>
    </section>

    <footer>
      <div>Built on top of SyncPairsTracker assets.</div>
    </footer>

    <script type="module" src="app.js"></script>
  </body>
</html>
